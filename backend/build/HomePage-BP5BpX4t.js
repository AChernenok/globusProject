const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["HomePage-D1ZG5zcx.js","strapi-D_yz_Lh-.js","strapi-DU8PNWtk.css","useLicenseLimitNotification-pzo7Vdfy.js","isNil-B9a1jsoD.js","WidgetHelpers-NgoFD1vJ.js","RelativeTime-BNOUxsGW.js","Ornaments-CqYhuQ0W.js"])))=>i.map(i=>d[i]);
import{cH as G,an as p,j as e,ao as P,ae as W,cs as A,cy as _,cu as $,cz as x,bC as m,aI as h,ar as O,cb as S,cB as v,J as V,g7 as B,h8 as F,cG as f,cp as U,N as q,h9 as z,aF as u,bH as Q,cl as J,bv as w,bz as M,P as I,aQ as T,bV as b,ha as X,b1 as Y,r as y,hb as K,b0 as Z}from"./strapi-D_yz_Lh-.js";import{W as g}from"./WidgetHelpers-NgoFD1vJ.js";import{R as ee}from"./RelativeTime-BNOUxsGW.js";import{L as te,N as se,V as ae,S as j}from"./Ornaments-CqYhuQ0W.js";const ne=G.enhanceEndpoints({addTagTypes:["RecentDocumentList"]}).injectEndpoints({endpoints:s=>({getRecentDocuments:s.query({query:t=>`/content-manager/homepage/recent-documents?action=${t.action}`,transformResponse:t=>t.data,providesTags:(t,n,{action:r})=>[{type:"RecentDocumentList",id:r}]})})}),{useGetRecentDocumentsQuery:R}=ne,H=V(h).attrs({maxWidth:"14.4rem",display:"block"})`
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,ie=({status:s="draft"})=>{const t=s==="draft"?"secondary":s==="published"?"success":"alternative",{formatMessage:n}=p();return e.jsx(B,{variant:t,size:"XS",children:e.jsx(h,{tag:"span",variant:"omega",fontWeight:"bold",children:n({id:`content-manager.containers.List.${s}`,defaultMessage:F(s)})})})},L=({documents:s})=>{const{formatMessage:t}=p(),{trackUsage:n}=P(),r=W(),a=i=>{const o=i.kind==="singleType",d=o?"single-types":"collection-types",c=i.locale?`?plugins[i18n][locale]=${i.locale}`:"";return`/content-manager/${d}/${i.contentTypeUid}${o?"":"/"+i.documentId}${c}`},l=i=>()=>{n("willEditEntryFromHome");const o=a(i);r(o)};return e.jsx(A,{colCount:5,rowCount:s?.length??0,children:e.jsx(_,{children:s?.map(i=>e.jsxs($,{onClick:l(i),cursor:"pointer",children:[e.jsx(x,{children:e.jsx(H,{title:i.title,variant:"omega",textColor:"neutral800",children:i.title})}),e.jsx(x,{children:e.jsx(H,{variant:"omega",textColor:"neutral600",children:i.kind==="singleType"?t({id:"content-manager.widget.last-edited.single-type",defaultMessage:"Single-Type"}):t({id:i.contentTypeDisplayName,defaultMessage:i.contentTypeDisplayName})})}),e.jsx(x,{children:e.jsx(m,{display:"inline-block",children:i.status?e.jsx(ie,{status:i.status}):e.jsx(h,{textColor:"neutral600","aria-hidden":!0,children:"-"})})}),e.jsx(x,{children:e.jsx(h,{textColor:"neutral600",children:e.jsx(ee,{timestamp:new Date(i.updatedAt)})})}),e.jsx(x,{onClick:o=>o.stopPropagation(),children:e.jsx(m,{display:"inline-block",children:e.jsx(O,{tag:S,to:a(i),onClick:()=>n("willEditEntryFromHome"),label:t({id:"content-manager.actions.edit.label",defaultMessage:"Edit"}),variant:"ghost",children:e.jsx(v,{})})})})]},i.documentId))})})},oe=()=>{const{formatMessage:s}=p(),{data:t,isLoading:n,error:r}=R({action:"update"});return n?e.jsx(g.Loading,{}):r||!t?e.jsx(g.Error,{}):t.length===0?e.jsx(g.NoData,{children:s({id:"content-manager.widget.last-edited.no-data",defaultMessage:"No edited entries"})}):e.jsx(L,{documents:t})},re=()=>{const{formatMessage:s}=p(),{data:t,isLoading:n,error:r}=R({action:"publish"});return n?e.jsx(g.Loading,{}):r||!t?e.jsx(g.Error,{}):t.length===0?e.jsx(g.NoData,{children:s({id:"content-manager.widget.last-published.no-data",defaultMessage:"No published entries"})}):e.jsx(L,{documents:t})},de=()=>{const s=f("GuidedTourHomepage",o=>o.guidedTourState),t=f("GuidedTourHomepage",o=>o.setSkipped),{formatMessage:n}=p(),{trackUsage:r}=P(),a=Object.entries(te).map(([o,d])=>({key:o,title:d.home.title,content:e.jsx(U,{onClick:()=>r(d.home.trackingEvent),tag:q,to:d.home.cta.target,endIcon:e.jsx(z,{}),children:n(d.home.cta.title)}),isDone:Object.values(s[o]).every(c=>c===!0)})),l=a.findIndex(o=>!o.isDone),i=()=>{t(!0),r("didSkipGuidedtour")};return e.jsxs(m,{hasRadius:!0,shadow:"tableShadow",paddingTop:7,paddingRight:4,paddingLeft:7,paddingBottom:4,background:"neutral0",children:[e.jsxs(u,{direction:"column",alignItems:"stretch",gap:6,children:[e.jsx(h,{variant:"beta",tag:"h2",children:n({id:"app.components.GuidedTour.title",defaultMessage:"3 steps to get started"})}),e.jsx(m,{children:a.map((o,d)=>{const c=le(l,d);return e.jsxs(m,{children:[e.jsxs(u,{children:[e.jsx(m,{minWidth:"3rem",marginRight:5,children:e.jsx(se,{state:c,children:d+1})}),e.jsx(h,{variant:"delta",tag:"h3",children:n(o.title)})]}),e.jsxs(u,{alignItems:"flex-start",children:[e.jsx(u,{justifyContent:"center",minWidth:"3rem",marginBottom:3,marginTop:3,marginRight:5,children:d===a.length-1?null:e.jsx(ae,{state:c})}),e.jsx(m,{marginTop:2,children:c===j.IS_ACTIVE?o.content:null})]})]},o.key)})})]}),e.jsx(u,{justifyContent:"flex-end",children:e.jsx(Q,{variant:"tertiary",onClick:i,children:n({id:"app.components.GuidedTour.skip",defaultMessage:"Skip the tour"})})})]})},le=(s,t)=>s===-1?j.IS_DONE:t<s?j.IS_DONE:t>s?j.IS_NOT_DONE:j.IS_ACTIVE,D=()=>{const s=f("HomePage",a=>a.guidedTourState),t=f("HomePage",a=>a.isGuidedTourVisible),n=f("HomePage",a=>a.isSkipped);return!Object.values(s).every(a=>Object.values(a).every(l=>l))&&t&&!n?e.jsx(de,{}):null},k=({title:s,icon:t=K,permissions:n=[],children:r,link:a})=>{const{formatMessage:l}=p(),i=y.useId(),o=t,[d,c]=y.useState("loading"),E=w("WidgetRoot",C=>C.checkUserHasPermissions);return y.useEffect(()=>{const C=async()=>{const N=(await E(n)).length>=n.length;c(N?"granted":"forbidden")};!window.strapi.future.isEnabled("unstableWidgetsApi")||!n||n.length===0?c("granted"):C()},[E,n]),e.jsxs(u,{width:"100%",hasRadius:!0,direction:"column",alignItems:"flex-start",background:"neutral0",borderColor:"neutral150",shadow:"tableShadow",tag:"section",gap:4,padding:6,"aria-labelledby":i,children:[e.jsxs(u,{direction:"row",gap:2,justifyContent:"space-between",width:"100%",tag:"header",children:[e.jsxs(u,{gap:2,children:[e.jsx(o,{fill:"neutral500","aria-hidden":!0}),e.jsx(h,{textColor:"neutral500",variant:"sigma",tag:"h2",id:i,children:l(s)})]}),a&&e.jsx(h,{tag:S,variant:"omega",textColor:"primary600",style:{textDecoration:"none"},to:a.href,children:l(a.label)})]}),e.jsxs(m,{width:"100%",height:"261px",overflow:"auto",tag:"main",children:[d==="loading"&&e.jsx(g.Loading,{}),d==="forbidden"&&e.jsx(g.NoPermissions,{}),d==="granted"&&r]})]})},ce=({component:s})=>{const[t,n]=y.useState(null);y.useEffect(()=>{(async()=>{const l=await s();n(()=>l)})()},[s]);const r=t;return r?e.jsx(r,{}):e.jsx(g.Loading,{})},ue=()=>{const{formatMessage:s}=p(),t=w("HomePageCE",a=>a.user),n=t?.firstname??t?.username??t?.email,r=Y("UnstableHomepageCe",a=>a.widgets.getAll);return e.jsxs(M,{children:[e.jsx(I.Title,{children:s({id:"HomePage.head.title",defaultMessage:"Homepage"})}),e.jsx(T.Header,{title:s({id:"HomePage.header.title",defaultMessage:"Hello {name}"},{name:n}),subtitle:s({id:"HomePage.header.subtitle",defaultMessage:"Welcome to your administration panel"})}),e.jsx(T.Content,{children:e.jsxs(u,{direction:"column",alignItems:"stretch",gap:8,paddingBottom:10,children:[e.jsx(D,{}),e.jsx(b.Root,{gap:5,children:r().map(a=>e.jsx(b.Item,{col:6,s:12,children:e.jsx(k,{title:a.title,icon:a.icon,permissions:a.permissions,link:a.link,children:e.jsx(ce,{component:a.component})})},a.uid))})]})})]})},ge=()=>{const{formatMessage:s}=p(),t=w("HomePageCE",r=>r.user),n=t?.firstname??t?.username??t?.email;return window.strapi.future.isEnabled("unstableWidgetsApi")?e.jsx(ue,{}):e.jsxs(M,{children:[e.jsx(I.Title,{children:s({id:"HomePage.head.title",defaultMessage:"Homepage"})}),e.jsx(T.Header,{title:s({id:"HomePage.header.title",defaultMessage:"Hello {name}"},{name:n}),subtitle:s({id:"HomePage.header.subtitle",defaultMessage:"Welcome to your administration panel"})}),e.jsx(T.Content,{children:e.jsxs(u,{direction:"column",alignItems:"stretch",gap:8,paddingBottom:10,children:[e.jsx(D,{}),e.jsxs(b.Root,{gap:5,children:[e.jsx(b.Item,{col:6,s:12,children:e.jsx(k,{title:{id:"content-manager.widget.last-edited.title",defaultMessage:"Last edited entries"},icon:v,children:e.jsx(oe,{})})}),e.jsx(b.Item,{col:6,s:12,children:e.jsx(k,{title:{id:"content-manager.widget.last-published.title",defaultMessage:"Last published entries"},icon:X,children:e.jsx(re,{})})})]})]})})]})},fe=()=>{const s=J(ge,async()=>(await Z(async()=>{const{HomePageEE:t}=await import("./HomePage-D1ZG5zcx.js");return{HomePageEE:t}},__vite__mapDeps([0,1,2,3,4,5,6,7]))).HomePageEE);return s?e.jsx(s,{}):null};export{fe as HomePage,ge as HomePageCE,k as WidgetRoot};
