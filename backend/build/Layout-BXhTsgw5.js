const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["strapi-D_yz_Lh-.js","strapi-DU8PNWtk.css"])))=>i.map(i=>d[i]);
import{r as g,bv as I,fT as w,b1 as T,aD as D,fU as A,cl as U,b0 as C,an as j,ao as O,ad as R,j as a,fV as $,fW as B,fX as G,fY as H,N as K,J as E,fZ as V,f_ as W,br as Y,P,bw as F,aQ as J,f$ as Q}from"./strapi-D_yz_Lh-.js";import{s as X}from"./sortBy-8FZLbO0S.js";import{s as Z}from"./selectors-DKyYoRZo.js";import"./_baseMap-BRZB5V-B.js";import"./_baseEach-BvHs_ggQ.js";const q=n=>n.map(i=>{const l=i.links.map(r=>({...r,isDisplayed:!1}));return{...i,links:l}}),z=()=>{const[{isLoading:n,menu:i},l]=g.useState({isLoading:!0,menu:[]}),r=I("useSettingsMenu",s=>s.checkUserHasPermissions),f=w("useSettingsMenu",s=>s.shouldUpdateStrapi),m=T("useSettingsMenu",s=>s.settings),u=D(Z),b=g.useMemo(()=>A(),[]),{admin:e,global:t}=U(b,async()=>(await C(async()=>{const{SETTINGS_LINKS_EE:s}=await import("./strapi-D_yz_Lh-.js").then(o=>o.px);return{SETTINGS_LINKS_EE:s}},__vite__mapDeps([0,1]))).SETTINGS_LINKS_EE(),{combine(s,o){return{admin:[...o.admin,...s.admin],global:[...s.global,...o.global]}},defaultValue:{admin:[],global:[]}}),h=g.useCallback(s=>{if(!s.id)throw new Error("The settings menu item must have an id attribute.");return{...s,permissions:u.settings?.[s.id]?.main??[]}},[u.settings]);return g.useEffect(()=>{const s=async()=>{const y=await(S=>Promise.all(S.reduce((d,L,x)=>{const k=L.links.map(async(N,p)=>({hasPermission:(await r(N.permissions)).length>0,sectionIndex:x,linkIndex:p}));return[...d,...k]},[])))(v);l(S=>({...S,isLoading:!1,menu:v.map((d,L)=>({...d,links:d.links.map((x,k)=>{const N=y.find(p=>p.sectionIndex===L&&p.linkIndex===k);return{...x,isDisplayed:!!N?.hasPermission}})}))}))},{global:o,..._}=m,v=q([{...o,links:X([...o.links,...t.map(h)],c=>c.id).map(c=>({...c,hasNotification:c.id==="000-application-infos"&&f}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:e.map(h)},...Object.values(_)]);s()},[e,t,m,f,h,r]),{isLoading:n,menu:i.map(s=>({...s,links:s.links.filter(o=>o.isDisplayed)}))}},M=E(V)`
  right: 15px;
  position: absolute;
  bottom: 50%;
  transform: translateY(50%);

  path {
    fill: ${({theme:n})=>n.colors.warning500};
  }
`,ss=E(W)`
  &.active ${M} {
    right: 13px;
  }
`,ts=({menu:n})=>{const{formatMessage:i}=j(),{trackUsage:l}=O(),{pathname:r}=R(),m=n.filter(e=>!e.links.every(t=>t.isDisplayed===!1)).map(e=>({...e,title:e.intlLabel,links:e.links.map(t=>({...t,title:t.intlLabel,name:t.id}))})),u=i({id:"global.settings",defaultMessage:"Settings"}),b=e=>()=>{l("willNavigate",{from:r,to:e})};return a.jsxs($,{"aria-label":u,children:[a.jsx(B,{label:u}),a.jsx(G,{children:m.map(e=>a.jsx(H,{label:i(e.intlLabel),children:e.links.map(t=>a.jsxs(ss,{tag:K,withBullet:t.hasNotification,to:t.to,onClick:b(t.to),position:"relative",children:[i(t.intlLabel),t?.licenseOnly&&a.jsx(M,{width:"1.5rem",height:"1.5rem"})]},t.id))},e.id))})]})},rs=()=>{const n=Y("/settings/:settingId/*"),{formatMessage:i}=j(),{isLoading:l,menu:r}=z();return l?a.jsx(P.Loading,{}):n?.params.settingId?a.jsxs(J.Root,{sideNav:a.jsx(ts,{menu:r}),children:[a.jsx(P.Title,{children:i({id:"global.settings",defaultMessage:"Settings"})}),a.jsx(Q,{})]}):a.jsx(F,{to:"application-infos"})};export{rs as Layout};
