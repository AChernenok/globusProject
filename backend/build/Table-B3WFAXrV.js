import{am as B,an as m,ae as M,ao as D,c5 as v,j as e,cI as a,aI as c,aF as E,cB as b,cE as C,bC as I,ar as L,cr as A,cF as F,N,J as U,cp as P}from"./strapi-D_yz_Lh-.js";import{R as f}from"./RelativeTime-BNOUxsGW.js";const O=({permissions:n,headers:s=[],isLoading:o=!1,tokens:l=[],onConfirmDelete:i,tokenType:r})=>{const[{query:d}]=B(),{formatMessage:k,locale:R}=m(),[,T]=d&&d.sort?d.sort.split(":"):[void 0,"ASC"],S=M(),{trackUsage:w}=D(),x=v(R),u=[...l].sort((t,h)=>T==="DESC"?x.compare(h.name,t.name):x.compare(t.name,h.name)),{canDelete:g,canUpdate:j,canRead:p}=n,y=t=>()=>{p&&(w("willEditTokenFromList",{tokenType:r}),S(t.toString()))};return e.jsx(a.Root,{headers:s,rows:u,isLoading:o,children:e.jsxs(a.Content,{children:[e.jsx(a.Head,{children:s.map(t=>e.jsx(a.HeaderCell,{...t},t.name))}),e.jsx(a.Empty,{}),e.jsx(a.Loading,{}),e.jsx(a.Body,{children:u.map(t=>e.jsxs(a.Row,{onClick:y(t.id),children:[e.jsx(a.Cell,{maxWidth:"25rem",children:e.jsx(c,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0,children:t.name})}),e.jsx(a.Cell,{maxWidth:"25rem",children:e.jsx(c,{textColor:"neutral800",ellipsis:!0,children:t.description})}),e.jsx(a.Cell,{children:e.jsx(c,{textColor:"neutral800",children:e.jsx(f,{timestamp:new Date(t.createdAt)})})}),e.jsx(a.Cell,{children:t.lastUsedAt&&e.jsx(c,{textColor:"neutral800",children:e.jsx(f,{timestamp:new Date(t.lastUsedAt),customIntervals:[{unit:"hours",threshold:1,text:k({id:"Settings.apiTokens.lastHour",defaultMessage:"last hour"})}]})})}),j||p||g?e.jsx(a.Cell,{children:e.jsxs(E,{justifyContent:"end",children:[j&&e.jsx(z,{tokenName:t.name,tokenId:t.id}),g&&e.jsx(q,{tokenName:t.name,onClickDelete:()=>i?.(t.id),tokenType:r})]})}):null]},t.id))})]})})},$={edit:{id:"app.component.table.edit",defaultMessage:"Edit {target}"},read:{id:"app.component.table.read",defaultMessage:"Read {target}"}},H=({tokenName:n,tokenId:s,buttonType:o="edit",children:l})=>{const{formatMessage:i}=m();return e.jsx(W,{tag:N,to:s.toString(),onClick:r=>r.stopPropagation(),title:i($[o],{target:n}),variant:"ghost",size:"S",children:l})},W=U(P)`
  padding: 0.7rem;

  & > span {
    display: flex;
  }
`,q=({tokenName:n,onClickDelete:s,tokenType:o})=>{const{formatMessage:l}=m(),{trackUsage:i}=D(),r=()=>{i("willDeleteToken",{tokenType:o}),s()};return e.jsx(C.Root,{children:e.jsxs(I,{paddingLeft:1,onClick:d=>d.stopPropagation(),children:[e.jsx(C.Trigger,{children:e.jsx(L,{label:l({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${n}`}),name:"delete",variant:"ghost",children:e.jsx(A,{})})}),e.jsx(F,{onConfirm:r})]})})},z=({tokenName:n,tokenId:s})=>e.jsx(H,{tokenName:n,tokenId:s,children:e.jsx(b,{})});export{O as T};
